<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>لوحة إدارة الطلبات - نظام المراسلين</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Cairo', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            direction: rtl;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .header h1 {
            color: #2d3748;
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: #2d3748;
        }

        .stat-label {
            color: #718096;
            font-size: 0.9rem;
        }

        .filters {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .filter-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            align-items: end;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
        }

        .filter-group label {
            margin-bottom: 5px;
            color: #4a5568;
            font-weight: 600;
        }

        .filter-group select,
        .filter-group input {
            padding: 10px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .filter-group select:focus,
        .filter-group input:focus {
            outline: none;
            border-color: #667eea;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover {
            background: #5a67d8;
        }

        .orders-grid {
            display: grid;
            gap: 20px;
        }

        .order-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            transition: transform 0.3s ease;
        }

        .order-card:hover {
            transform: translateY(-3px);
        }

        .order-header {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .order-id {
            font-weight: bold;
            font-size: 1.1rem;
        }

        .order-status {
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .status-completed {
            background: #48bb78;
            color: white;
        }

        .status-pending {
            background: #ed8936;
            color: white;
        }

        .status-cancelled {
            background: #f56565;
            color: white;
        }

        .order-body {
            padding: 20px;
        }

        .order-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .info-section {
            background: #f7fafc;
            border-radius: 10px;
            padding: 15px;
        }

        .info-title {
            color: #2d3748;
            font-weight: 600;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .info-details {
            color: #4a5568;
            line-height: 1.6;
        }

        .location-map {
            width: 100%;
            height: 200px;
            border-radius: 10px;
            background: #e2e8f0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #718096;
            margin-top: 10px;
        }

        .order-image {
            width: 100%;
            max-width: 300px;
            height: 200px;
            object-fit: cover;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .duration-indicator {
            background: linear-gradient(90deg, #4299e1, #48bb78);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: 600;
            display: inline-block;
        }

        .action-buttons {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .btn-view {
            background: #4299e1;
            color: white;
        }

        .btn-edit {
            background: #ed8936;
            color: white;
        }

        .btn-delete {
            background: #f56565;
            color: white;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
        }

        .modal-content {
            background: white;
            border-radius: 15px;
            max-width: 800px;
            width: 90%;
            max-height: 90%;
            overflow-y: auto;
            margin: 5% auto;
            position: relative;
        }

        .modal-header {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 20px;
            border-radius: 15px 15px 0 0;
        }

        .modal-body {
            padding: 20px;
        }

        .close-modal {
            position: absolute;
            top: 15px;
            left: 20px;
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #718096;
        }

        .spinner {
            border: 4px solid #e2e8f0;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .order-info {
                grid-template-columns: 1fr;
            }
            
            .filter-row {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1><i class="fas fa-chart-line"></i> لوحة إدارة الطلبات</h1>
            <p style="text-align: center; color: #718096; margin-top: 10px;">
                مراقبة وإدارة طلبات المراسلين في الوقت الفعلي
            </p>
        </div>

        <!-- Statistics -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon" style="color: #48bb78;">
                    <i class="fas fa-check-circle"></i>
                </div>
                <div class="stat-value" id="completedOrders">0</div>
                <div class="stat-label">طلبات مكتملة</div>
            </div>
            
            <div class="stat-card">
                <div class="stat-icon" style="color: #ed8936;">
                    <i class="fas fa-clock"></i>
                </div>
                <div class="stat-value" id="pendingOrders">0</div>
                <div class="stat-label">طلبات قيد التنفيذ</div>
            </div>
            
            <div class="stat-card">
                <div class="stat-icon" style="color: #f56565;">
                    <i class="fas fa-times-circle"></i>
                </div>
                <div class="stat-value" id="cancelledOrders">0</div>
                <div class="stat-label">طلبات ملغية</div>
            </div>
            
            <div class="stat-card">
                <div class="stat-icon" style="color: #4299e1;">
                    <i class="fas fa-users"></i>
                </div>
                <div class="stat-value" id="activeMessengers">0</div>
                <div class="stat-label">مراسلين نشطين</div>
            </div>
        </div>

        <!-- Filters -->
        <div class="filters">
            <div class="filter-row">
                <div class="filter-group">
                    <label>حالة الطلب</label>
                    <select id="statusFilter">
                        <option value="">جميع الحالات</option>
                        <option value="completed">مكتمل</option>
                        <option value="pending">قيد التنفيذ</option>
                        <option value="cancelled">ملغي</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label>المراسل</label>
                    <select id="messengerFilter">
                        <option value="">جميع المراسلين</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label>من تاريخ</label>
                    <input type="date" id="dateFrom">
                </div>
                
                <div class="filter-group">
                    <label>إلى تاريخ</label>
                    <input type="date" id="dateTo">
                </div>
                
                <div class="filter-group">
                    <button class="btn btn-primary" onclick="applyFilters()">
                        <i class="fas fa-filter"></i> تطبيق الفلاتر
                    </button>
                </div>
            </div>
        </div>

        <!-- Loading -->
        <div class="loading" id="loading">
            <div class="spinner"></div>
            <p>جاري تحميل البيانات...</p>
        </div>

        <!-- Orders Grid -->
        <div class="orders-grid" id="ordersGrid">
            <!-- Orders will be dynamically loaded here -->
        </div>
    </div>

    <!-- Order Details Modal -->
    <div class="modal" id="orderModal">
        <div class="modal-content">
            <div class="modal-header">
                <button class="close-modal" onclick="closeModal()">&times;</button>
                <h2 id="modalTitle">تفاصيل الطلب</h2>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- Modal content will be loaded here -->
            </div>
        </div>
    </div>

    <script>
        // Sample data - replace with actual API calls
        let ordersData = [
            {
                id: 'ORD-001',
                messenger: 'أحمد محمد',
                customerName: 'سارة أحمد',
                customerPhone: '+964 7901234567',
                location: {
                    address: 'شارع الكرادة، بغداد',
                    lat: 33.3128,
                    lng: 44.3736
                },
                orderDate: '2024-01-15T10:30:00',
                completedDate: '2024-01-15T11:45:00',
                status: 'completed',
                duration: 75, // minutes
                items: ['هاتف ذكي', 'سماعات لاسلكية'],
                total: 850000,
                image: 'https://via.placeholder.com/300x200/48bb78/ffffff?text=طلب+مكتمل',
                notes: 'تم التسليم بنجاح للعميل'
            },
            {
                id: 'ORD-002',
                messenger: 'محمد علي',
                customerName: 'عماد حسن',
                customerPhone: '+964 7812345678',
                location: {
                    address: 'شارع المنصور، بغداد',
                    lat: 33.2778,
                    lng: 44.2306
                },
                orderDate: '2024-01-15T12:00:00',
                completedDate: null,
                status: 'pending',
                duration: 45,
                items: ['لابتوب', 'ماوس لاسلكي'],
                total: 1200000,
                image: 'https://via.placeholder.com/300x200/ed8936/ffffff?text=قيد+التنفيذ',
                notes: 'في طريق التسليم'
            },
            {
                id: 'ORD-003',
                messenger: 'علي حسن',
                customerName: 'فاطمة محمد',
                customerPhone: '+964 7723456789',
                location: {
                    address: 'شارع الجادرية، بغداد',
                    lat: 33.2619,
                    lng: 44.3742
                },
                orderDate: '2024-01-15T09:15:00',
                completedDate: null,
                status: 'cancelled',
                duration: 30,
                items: ['تابلت', 'كيبورد'],
                total: 450000,
                image: 'https://via.placeholder.com/300x200/f56565/ffffff?text=طلب+ملغي',
                notes: 'ألغي الطلب بناءً على طلب العميل'
            }
        ];

        // Initialize the dashboard
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                document.getElementById('loading').style.display = 'none';
                loadOrders();
                updateStatistics();
                loadMessengers();
            }, 1500);
        });

        function loadOrders() {
            const ordersGrid = document.getElementById('ordersGrid');
            ordersGrid.innerHTML = '';

            ordersData.forEach(order => {
                const orderCard = createOrderCard(order);
                ordersGrid.appendChild(orderCard);
            });
        }

        function createOrderCard(order) {
            const card = document.createElement('div');
            card.className = 'order-card';
            
            const statusClass = `status-${order.status}`;
            const statusText = getStatusText(order.status);
            const duration = formatDuration(order.duration);
            const orderDate = new Date(order.orderDate).toLocaleString('ar-IQ');
            
            card.innerHTML = `
                <div class="order-header">
                    <div class="order-id">${order.id}</div>
                    <div class="order-status ${statusClass}">${statusText}</div>
                </div>
                
                <div class="order-body">
                    <div class="order-info">
                        <!-- Messenger Info -->
                        <div class="info-section">
                            <div class="info-title">
                                <i class="fas fa-user"></i>
                                معلومات المراسل
                            </div>
                            <div class="info-details">
                                <strong>الاسم:</strong> ${order.messenger}<br>
                                <strong>حالة الطلب:</strong> ${statusText}<br>
                                <strong>المدة:</strong> <span class="duration-indicator">${duration}</span>
                            </div>
                        </div>

                        <!-- Customer Info -->
                        <div class="info-section">
                            <div class="info-title">
                                <i class="fas fa-user-circle"></i>
                                معلومات العميل
                            </div>
                            <div class="info-details">
                                <strong>الاسم:</strong> ${order.customerName}<br>
                                <strong>الهاتف:</strong> ${order.customerPhone}<br>
                                <strong>العنوان:</strong> ${order.location.address}
                            </div>
                        </div>

                        <!-- Order Details -->
                        <div class="info-section">
                            <div class="info-title">
                                <i class="fas fa-shopping-cart"></i>
                                تفاصيل الطلب
                            </div>
                            <div class="info-details">
                                <strong>تاريخ الطلب:</strong> ${orderDate}<br>
                                <strong>العناصر:</strong> ${order.items.join(', ')}<br>
                                <strong>المجموع:</strong> ${order.total.toLocaleString()} دينار
                            </div>
                        </div>

                        <!-- Order Image -->
                        <div class="info-section">
                            <div class="info-title">
                                <i class="fas fa-camera"></i>
                                صورة الطلب
                            </div>
                            <img src="${order.image}" alt="صورة الطلب" class="order-image">
                        </div>
                    </div>

                    <!-- Location Map -->
                    <div class="info-section">
                        <div class="info-title">
                            <i class="fas fa-map-marker-alt"></i>
                            الموقع
                        </div>
                        <div class="location-map">
                            <i class="fas fa-map"></i>
                            خريطة الموقع - ${order.location.address}
                        </div>
                    </div>

                    <!-- Notes -->
                    ${order.notes ? `
                        <div class="info-section">
                            <div class="info-title">
                                <i class="fas fa-sticky-note"></i>
                                ملاحظات
                            </div>
                            <div class="info-details">${order.notes}</div>
                        </div>
                    ` : ''}

                    <!-- Action Buttons -->
                    <div class="action-buttons">
                        <button class="btn btn-view" onclick="viewOrderDetails('${order.id}')">
                            <i class="fas fa-eye"></i> عرض التفاصيل
                        </button>
                        <button class="btn btn-edit" onclick="editOrder('${order.id}')">
                            <i class="fas fa-edit"></i> تعديل
                        </button>
                        <button class="btn btn-delete" onclick="deleteOrder('${order.id}')">
                            <i class="fas fa-trash"></i> حذف
                        </button>
                    </div>
                </div>
            `;

            return card;
        }

        function getStatusText(status) {
            const statusMap = {
                'completed': 'مكتمل',
                'pending': 'قيد التنفيذ',
                'cancelled': 'ملغي'
            };
            return statusMap[status] || status;
        }

        function formatDuration(minutes) {
            const hours = Math.floor(minutes / 60);
            const mins = minutes % 60;
            
            if (hours > 0) {
                return `${hours} ساعة و ${mins} دقيقة`;
            }
            return `${mins} دقيقة`;
        }

        function updateStatistics() {
            const completed = ordersData.filter(o => o.status === 'completed').length;
            const pending = ordersData.filter(o => o.status === 'pending').length;
            const cancelled = ordersData.filter(o => o.status === 'cancelled').length;
            const messengers = [...new Set(ordersData.map(o => o.messenger))].length;

            document.getElementById('completedOrders').textContent = completed;
            document.getElementById('pendingOrders').textContent = pending;
            document.getElementById('cancelledOrders').textContent = cancelled;
            document.getElementById('activeMessengers').textContent = messengers;
        }

        function loadMessengers() {
            const messengerFilter = document.getElementById('messengerFilter');
            const messengers = [...new Set(ordersData.map(o => o.messenger))];
            
            messengers.forEach(messenger => {
                const option = document.createElement('option');
                option.value = messenger;
                option.textContent = messenger;
                messengerFilter.appendChild(option);
            });
        }

        function applyFilters() {
            const statusFilter = document.getElementById('statusFilter').value;
            const messengerFilter = document.getElementById('messengerFilter').value;
            const dateFrom = document.getElementById('dateFrom').value;
            const dateTo = document.getElementById('dateTo').value;

            let filteredData = ordersData;

            if (statusFilter) {
                filteredData = filteredData.filter(o => o.status === statusFilter);
            }

            if (messengerFilter) {
                filteredData = filteredData.filter(o => o.messenger === messengerFilter);
            }

            if (dateFrom) {
                filteredData = filteredData.filter(o => new Date(o.orderDate) >= new Date(dateFrom));
            }

            if (dateTo) {
                filteredData = filteredData.filter(o => new Date(o.orderDate) <= new Date(dateTo));
            }

            displayFilteredOrders(filteredData);
        }

        function displayFilteredOrders(filteredData) {
            const ordersGrid = document.getElementById('ordersGrid');
            ordersGrid.innerHTML = '';

            filteredData.forEach(order => {
                const orderCard = createOrderCard(order);
                ordersGrid.appendChild(orderCard);
            });
        }

        function viewOrderDetails(orderId) {
            const order = ordersData.find(o => o.id === orderId);
            if (!order) return;

            const modal = document.getElementById('orderModal');
            const modalTitle = document.getElementById('modalTitle');
            const modalBody = document.getElementById('modalBody');

            modalTitle.textContent = `تفاصيل الطلب ${order.id}`;
            
            modalBody.innerHTML = `
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                    <div class="info-section">
                        <h3><i class="fas fa-info-circle"></i> معلومات عامة</h3>
                        <p><strong>رقم الطلب:</strong> ${order.id}</p>
                        <p><strong>تاريخ الطلب:</strong> ${new Date(order.orderDate).toLocaleString('ar-IQ')}</p>
                        <p><strong>الحالة:</strong> ${getStatusText(order.status)}</p>
                        <p><strong>المدة:</strong> ${formatDuration(order.duration)}</p>
                    </div>
                    
                    <div class="info-section">
                        <h3><i class="fas fa-user"></i> المراسل</h3>
                        <p><strong>الاسم:</strong> ${order.messenger}</p>
                        <p><strong>حالة التسليم:</strong> ${getStatusText(order.status)}</p>
                    </div>
                    
                    <div class="info-section">
                        <h3><i class="fas fa-user-circle"></i> العميل</h3>
                        <p><strong>الاسم:</strong> ${order.customerName}</p>
                        <p><strong>الهاتف:</strong> ${order.customerPhone}</p>
                        <p><strong>العنوان:</strong> ${order.location.address}</p>
                    </div>
                    
                    <div class="info-section">
                        <h3><i class="fas fa-shopping-cart"></i> العناصر</h3>
                        <ul>
                            ${order.items.map(item => `<li>${item}</li>`).join('')}
                        </ul>
                        <p><strong>المجموع:</strong> ${order.total.toLocaleString()} دينار</p>
                    </div>
                </div>
                
                <div class="info-section" style="margin-top: 20px;">
                    <h3><i class="fas fa-camera"></i> صورة الطلب</h3>
                    <img src="${order.image}" alt="صورة الطلب" style="width: 100%; max-width: 400px; border-radius: 10px;">
                </div>
                
                ${order.notes ? `
                    <div class="info-section" style="margin-top: 20px;">
                        <h3><i class="fas fa-sticky-note"></i> ملاحظات</h3>
                        <p>${order.notes}</p>
                    </div>
                ` : ''}
            `;

            modal.style.display = 'block';
        }

        function editOrder(orderId) {
            alert(`سيتم فتح نافذة تحرير الطلب ${orderId}`);
        }

        function deleteOrder(orderId) {
            if (confirm(`هل أنت متأكد من حذف الطلب ${orderId}؟`)) {
                ordersData = ordersData.filter(o => o.id !== orderId);
                loadOrders();
                updateStatistics();
                alert('تم حذف الطلب بنجاح');
            }
        }

        function closeModal() {
            document.getElementById('orderModal').style.display = 'none';
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('orderModal');
            if (event.target === modal) {
                modal.style.display = 'none';
            }
        }

        // Real-time updates simulation
        function simulateRealTimeUpdates() {
            setInterval(() => {
                // Simulate order status changes
                const randomIndex = Math.floor(Math.random() * ordersData.length);
                const statuses = ['completed', 'pending', 'cancelled'];
                const randomStatus = statuses[Math.floor(Math.random() * statuses.length)];
                
                if (ordersData[randomIndex]) {
                    ordersData[randomIndex].status = randomStatus;
                    loadOrders();
                    updateStatistics();
                }
            }, 30000); // Update every 30 seconds
        }

        // Start real-time updates
        setTimeout(simulateRealTimeUpdates, 5000);

        // Export functions
        function exportToExcel() {
            const csvContent = "data:text/csv;charset=utf-8," + 
                "رقم الطلب,المراسل,العميل,الهاتف,العنوان,تاريخ الطلب,الحالة,المدة,المجموع\n" +
                ordersData.map(order => 
                    `${order.id},${order.messenger},${order.customerName},${order.customerPhone},"${order.location.address}",${new Date(order.orderDate).toLocaleDateString('ar-IQ')},${getStatusText(order.status)},${formatDuration(order.duration)},${order.total}`
                ).join("\n");
            
            const encodedUri = encodeURI(csvContent);
            const link = document.createElement("a");
            link.setAttribute("href", encodedUri);
            link.setAttribute("download", "orders_report.csv");
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        // Add export button to header
        document.addEventListener('DOMContentLoaded', function() {
            const header = document.querySelector('.header');
            const exportBtn = document.createElement('button');
            exportBtn.className = 'btn btn-primary';
            exportBtn.style.cssText = 'position: absolute; top: 20px; left: 20px;';
            exportBtn.innerHTML = '<i class="fas fa-download"></i> تصدير إلى Excel';
            exportBtn.onclick = exportToExcel;
            header.style.position = 'relative';
            header.appendChild(exportBtn);
        });

        // Add search functionality
        function addSearchFunctionality() {
            const searchInput = document.createElement('input');
            searchInput.type = 'text';
            searchInput.placeholder = 'البحث في الطلبات...';
            searchInput.style.cssText = 'padding: 10px; border: 2px solid #e2e8f0; border-radius: 8px; width: 300px; margin: 10px auto; display: block;';
            
            searchInput.addEventListener('input', function(e) {
                const searchTerm = e.target.value.toLowerCase();
                const filteredData = ordersData.filter(order => 
                    order.id.toLowerCase().includes(searchTerm) ||
                    order.messenger.toLowerCase().includes(searchTerm) ||
                    order.customerName.toLowerCase().includes(searchTerm) ||
                    order.location.address.toLowerCase().includes(searchTerm)
                );
                displayFilteredOrders(filteredData);
            });

            const filtersDiv = document.querySelector('.filters');
            filtersDiv.insertBefore(searchInput, filtersDiv.firstChild);
        }

        // Initialize search
        setTimeout(addSearchFunctionality, 2000);
    </script>
</body>
</html>
